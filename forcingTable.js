/*!
 * ForcingTable v1.0.0
 *
 * Require Jquery
 *
 * Copyright 2020
 * Este c√≥digo es para uso de tablas
 * Development By Benjamin Quispe
 *
 * Date: 2020-02-20T20:13Z
 */
function fe(b){ b.find('.preloadingTable').remove(); } function fc(a,c){ var p = c.outerHeight(true); if(p!=0 && p!=null){ $('.fix-margin-thead').css({ height: p }); var q = a.find('tfoot').outerHeight(true); $('.fix-margin-thead-after').css({ height: q + 1 }); a.css({marginTop: p}).find('thead').css({marginTop: p * -1}); } } function fb(a){ var ca = a.find('tfoot'); ca.each(function(_i,_e){ var af = 0; var g = 0; var error = 1; $(this).find('th').each(function(_i,_e){ var k = {}; var ae = $(this).attr('colspan'); if(ae==undefined){ ae = 1; } ae = parseInt(ae); var ad = 0; var bd = false; for(x=0;x<ae;x++){ af+=1; var ac = a.find('.child-thead th:nth-child('+af+')'); var aj = $(ac).outerWidth(true); if($(ac).hasClass('fixedColum')){ bd = true; aj = $(ac).data('width'); g+=aj; k.width = ad; }else{ bd = false; } ad+=aj; } k.width = ad; k.minWidth = ad; if(bd){ k.position = 'absolute'; k.left = g*-1; k.zIndex = 10; $(this).addClass('fixedColum'); } $(this).css(k).attr('data-width',ad); }); var bc = $(this).outerHeight(true); $(this).find('.fixedColum').css({height:bc}); var bf = ca.outerHeight(true); if($(this).hasClass('fixedFoot')){ a.css({ marginBottom:bf }); var be = "calc(100% - "+g+"px)"; ca.css({ width:be, position:"absolute", bottom:0 }); } }); } function fa(a,c){ c.find('.headTable').each(function(i,e){ var af = 0; var g = 0; $(this).find('th').each(function(_i,_e){ var k = {}; var ae = $(this).attr('colspan'); if(ae==undefined){ ae = 1; } ae = parseInt(ae); var ad = 0; var bd = false; for(x=0;x<ae;x++){ af+=1; var ac = c.find('.child-thead th:nth-child('+af+')'); var aj = $(ac).outerWidth(); if($(ac).hasClass('fixedColum')){ bd = true; aj = $(ac).data('width'); g+=aj; }else{ bd = false; } ad+=aj; } k.minWidth = ad; k.width = ad; if(bd){ k.position = 'absolute'; k.left = g*-1; k.zIndex = 10; $(this).addClass('fixedColum'); } $(this).css(k).attr('data-width',ad); }); var bc = $(this).outerHeight(true); $(this).find('.fixedColum').css({height:bc}); }); } function fd(a,g){ var r = 0; var s = 0; a.scroll(function (es) { var t = $(this).scrollLeft(); var u = $(this).scrollTop(); if (r != t) { var bb = (t * -1); $(this).find('thead,tfoot').css({ left: bb + g }); var v = 0; var v2 = 0; var v3 = 0; $('.child-thead th.fixedColum', a).each(function(){ $(this).css({ left: t - g + v }); v+=$(this).data('width'); }); $('.headTable th.fixedColum', a).each(function(){ $(this).css({ left: t - g + v2 }); v2+=$(this).data('width'); }); $('tfoot th.fixedColum', a).each(function(){ $(this).css({ left: t - g + v3 }); v3+=$(this).data('width'); }); r = t; } if (s != u) { var ba = (u * -1); $(this).find('tbody td.fixedColumChild').css({ marginTop: ba }); s = u; } }); } function freezeTable(b){ var d = 0; var e = 0; var e = b; var a = $('table',e); var c = a.find('thead'); var f = a.find('tbody'); var g = 0; $(document).ready(function() { e.addClass('set-table-fixed') .prepend('<div class="fix-margin-thead"></div><div class="fix-margin-thead-after"></div>'); c.find('tr:not(".headTable") th').each(function (_i, _e) { var h = $(this).data('width'); var i = $(this); var j = 0; var k = {}; var l = ''; e += h; j = h * 100 / e; if (!$(i).hasClass('fixedColum')) { d += h; j = h * 100 / d; k = {width: j + "%", minWidth: h}; l = 'normalColumChild'; }else{ g+=h; k = {width: h, minWidth: h}; l = 'fixedColumChild'; } $(this).css(k); a.find('tr:not(".headTable")').each(function (_iTr, tr) { $(tr).find('td').eq(_i).css(k).addClass(l).attr('data-width',h); }); }); $('tr', f).each(function (_i, _v) { var y = 0; var z = 0; $(this).find('td').each(function(_i2,td){ if($(this).hasClass('fixedColumChild')){ var aa = $(this).data('width'); if(z==0){ z = $(this).outerHeight(true); } var k = { position: 'absolute', left: y, height: z }; $(td).css(k); y+=aa; } }); }); var m = 0; var n = g; var o = c.find('tr:not(".headTable") th').outerHeight(true); $('.child-thead th', a).each(function (_i, _v) { var height = o; if ($(this).hasClass('fixedColum')) { m = o; $(this).css({ position: 'absolute', left: n * -1, height: height, zIndex: 9 }); n-=$(this).data('width'); } else { if (m != 0) { height = m; } $(this).css({ height: height }); } }); var ab = g + 17; c.css({left: g,width: 'calc(100% - ' + ab+ 'px)'}); a.css({marginLeft: g,width: 'calc(100% - ' + g+ 'px)'}); /*THEAD AND FOOT PARENT*/ fa(a,c); fb(a); /*END THEAD AND FOOT PARENT*/ fc(a,c); fd(a,g); fe(b); }); };
